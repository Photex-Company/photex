(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{FkkA:function(e,t,c){"use strict";c.r(t);var a=c("ofXK"),o=c("tyNb"),s=c("EGQa"),n=c("3wQM"),l=c("0IaG"),i=c("fXoL"),g=c("kmnG"),r=c("qFsG"),u=c("bTqV");let d=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){}onAddClick(){this.dialogRef.close(this.catalogueName)}onCloseClick(){this.dialogRef.close()}onKey(e){this.catalogueName=e.target.value}}return e.\u0275fac=function(t){return new(t||e)(i.ac(l.f),i.ac(l.a))},e.\u0275cmp=i.Ub({type:e,selectors:[["app-add-catalogue-dialog"]],decls:9,vars:0,consts:[["matInput","",3,"keyup"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(e,t){1&e&&(i.gc(0,"mat-form-field"),i.gc(1,"mat-label"),i.Oc(2,"Catalogue's name"),i.fc(),i.gc(3,"input",0),i.oc("keyup",(function(e){return t.onKey(e)})),i.fc(),i.fc(),i.gc(4,"div",1),i.gc(5,"button",2),i.oc("click",(function(){return t.onCloseClick()})),i.Oc(6,"Cancel"),i.fc(),i.gc(7,"button",2),i.oc("click",(function(){return t.onAddClick()})),i.Oc(8,"Add"),i.fc(),i.fc())},directives:[g.a,g.d,r.a,l.c,u.b],styles:[""]}),e})();var f=c("cp0P"),h=c("MB3r"),b=c("aEH8"),p=c("NFeN"),m=c("82XJ");function C(e,t){if(1&e){const e=i.hc();i.gc(0,"button",1),i.oc("click",(function(){return i.Gc(e),i.sc().selectAll()})),i.Oc(1,"Select all "),i.gc(2,"mat-icon"),i.Oc(3,"check_box"),i.fc(),i.fc()}}function k(e,t){if(1&e){const e=i.hc();i.gc(0,"button",1),i.oc("click",(function(){return i.Gc(e),i.sc().unselectAll()})),i.Oc(1,"Unselect all "),i.gc(2,"mat-icon"),i.Oc(3,"check_box_outline_blank"),i.fc(),i.fc()}}function O(e,t){if(1&e){const e=i.hc();i.gc(0,"button",1),i.oc("click",(function(){i.Gc(e);const t=i.sc();return t.delete(t.selected)})),i.Oc(1,"Delete "),i.gc(2,"mat-icon"),i.Oc(3,"delete"),i.fc(),i.fc()}}function v(e,t){if(1&e){const e=i.hc();i.gc(0,"img",17),i.oc("click",(function(){i.Gc(e);const t=i.sc().$implicit;return i.sc().selectCatalogue(t)})),i.fc()}}function _(e,t){if(1&e){const e=i.hc();i.gc(0,"img",18),i.oc("click",(function(){i.Gc(e);const t=i.sc().$implicit;return i.sc().unselectCatalogue(t)})),i.fc()}}function w(e,t){if(1&e){const e=i.hc();i.gc(0,"div",10),i.gc(1,"div",11),i.Mc(2,v,1,0,"img",12),i.Mc(3,_,1,0,"ng-template",null,13,i.Nc),i.gc(5,"img",14),i.oc("click",(function(){i.Gc(e);const c=t.$implicit;return i.sc().goToCalogue(c)})),i.fc(),i.gc(6,"label",15),i.Oc(7),i.fc(),i.gc(8,"label",16),i.Oc(9),i.tc(10,"dateFormat"),i.fc(),i.fc(),i.fc()}if(2&e){const e=t.$implicit,c=i.Ec(4),a=i.sc();i.Ob(2),i.yc("ngIf",!a.isSelected(e.Id))("ngIfElse",c),i.Ob(3),i.zc("src",e.CoverImageUrl,i.Hc),i.Ob(2),i.Pc(e.Name),i.Ob(2),i.Pc(i.vc(10,5,e.LastModified,!0))}}const y=[{path:"",component:(()=>{class e{constructor(e,t,c,a){this.catalogueService=e,this.router=t,this.dialog=c,this.snackBar=a,this.cataloguesInRowNo=4,this.selected=[]}ngOnInit(){this.initCatalogues()}initCatalogues(){this.catalogueService.getAllCatalogues().subscribe(e=>{this.catalogues=e})}refreshCatalogues(){this.selected=[],this.initCatalogues()}goToCalogue(e){this.router.navigate([s.a.CATALOGUE,s.a.CATALOGUE,e.Id])}addCalogue(){this.dialog.open(d,{}).afterClosed().subscribe(e=>{e&&this.catalogueService.addCatalogue(e).subscribe(e=>{this.snackBar.open("New catalogue added","Ok"),this.refreshCatalogues()},()=>{this.snackBar.open("Catalogue could not be created","Ok")})})}delete(e){1!==e.length?this.deleteCatalogues(e):this.deleteCatalogue(e[0])}isSelected(e){return!!this.selected.find(t=>t.Id===e)}selectCatalogue(e){this.selected.push(e)}unselectCatalogue(e){const t=this.selected.indexOf(e,0);t>-1&&this.selected.splice(t,1)}anySelected(){return this.selected.length>0}allSelected(){return!!this.catalogues&&this.selected.length===this.catalogues.length}selectAll(){this.selected=Object.assign([],this.catalogues)}unselectAll(){this.selected=[]}deleteCatalogues(e){this.dialog.open(n.a,{data:{title:"Delete catalogues",message:"Are you sure to delete "+e.length+" catalogues ?",ok:"Delete",cancel:"Cancel"}}).afterClosed().subscribe(t=>{if(t){let t=[];e.forEach(e=>{t.push(this.catalogueService.deleteCatalogue(e.Id))}),Object(f.a)(t).subscribe(()=>{this.snackBar.open("Catalogues was deleted","Ok",3e3),this.refreshCatalogues()},e=>{console.log(e),this.snackBar.open("Catalogue could not be deleted","Ok",3e3)})}})}deleteCatalogue(e){this.dialog.open(n.a,{data:{title:"Delete catalogue",message:"Are you sure to delete catalogue "+e.Name+"?",ok:"Delete",cancel:"Cancel"}}).afterClosed().subscribe(t=>{t&&this.catalogueService.deleteCatalogue(e.Id).subscribe(()=>{this.snackBar.open("Catalogue was deleted","Ok",3e3),this.refreshCatalogues()},()=>{this.snackBar.open("Catalogue not be deleted","Ok",3e3)})})}}return e.\u0275fac=function(t){return new(t||e)(i.ac(h.a),i.ac(o.d),i.ac(l.b),i.ac(b.a))},e.\u0275cmp=i.Ub({type:e,selectors:[["app-dashboard-page"]],decls:20,vars:4,consts:[[1,"top-tool-bar"],[1,"ml-3","toolbar-add-button",3,"click"],["class","ml-3 toolbar-add-button",3,"click",4,"ngIf"],[1,"ml-3","toolbar-add-button","right"],[1,"container-fluid"],[1,"row"],[1,"col-md-4"],[1,"inline"],[1,"back-button"],["ngFor","",3,"ngForOf"],[1,"col-md-3","img-container"],[1,"img-wrap"],["src","assets/svg/radio_button_unchecked.svg","class","select","onmouseover","this.src='assets/svg/check_circle_outline.svg'","onmouseout","this.src='assets/svg/radio_button_unchecked.svg'",3,"click",4,"ngIf","ngIfElse"],["selectedImg",""],["onerror","this.src='assets/svg/folder.svg'","alt","Catalogue img",1,"catalog-image",3,"src","click"],[1,"img-label"],[1,"form-group","img-label","date"],["src","assets/svg/radio_button_unchecked.svg","onmouseover","this.src='assets/svg/check_circle_outline.svg'","onmouseout","this.src='assets/svg/radio_button_unchecked.svg'",1,"select",3,"click"],["src","assets/svg/check_circle.svg",1,"select",3,"click"]],template:function(e,t){1&e&&(i.gc(0,"div",0),i.gc(1,"button",1),i.oc("click",(function(){return t.addCalogue()})),i.Oc(2,"New "),i.gc(3,"mat-icon"),i.Oc(4,"create_new_folder"),i.fc(),i.fc(),i.Mc(5,C,4,0,"button",2),i.Mc(6,k,4,0,"button",2),i.Mc(7,O,4,0,"button",2),i.gc(8,"button",3),i.Oc(9,"Sort "),i.gc(10,"mat-icon"),i.Oc(11,"sort"),i.fc(),i.fc(),i.fc(),i.gc(12,"div",4),i.gc(13,"div",5),i.gc(14,"div",6),i.gc(15,"h1",7),i.gc(16,"a",8),i.Oc(17,"Dashboard"),i.fc(),i.fc(),i.fc(),i.fc(),i.gc(18,"div",5),i.Mc(19,w,11,8,"ng-template",9),i.fc(),i.fc()),2&e&&(i.Ob(5),i.yc("ngIf",!t.allSelected()),i.Ob(1),i.yc("ngIf",t.anySelected()),i.Ob(1),i.yc("ngIf",t.anySelected()),i.Ob(12),i.yc("ngForOf",t.catalogues))},directives:[p.a,a.m,a.l],pipes:[m.a],styles:[".catalog-image[_ngcontent-%COMP%]{margin:30px 15px 15px;height:78px}.img-container[_ngcontent-%COMP%]{display:inline;margin-bottom:20px;padding:20px}label[_ngcontent-%COMP%]{display:block}.right[_ngcontent-%COMP%]{float:right}.img-wrap[_ngcontent-%COMP%]{position:relative;width:172px;height:172px;text-align:center}.img-wrap[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,75.3%,.3);cursor:pointer}.img-wrap[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{position:absolute;top:2px;right:4px;z-index:100}.img-wrap[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:hover{cursor:pointer;color:rgba(51,34,51,.13)}.img-label.date[_ngcontent-%COMP%]{white-space:nowrap;font-size:12px}h1[_ngcontent-%COMP%]{margin:16px}a[_ngcontent-%COMP%]{padding:5px}"]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=i.Yb({type:e}),e.\u0275inj=i.Xb({factory:function(t){return new(t||e)},imports:[[o.f.forChild(y)],o.f]}),e})();var I=c("6k0h"),x=c("KZX/");c.d(t,"DashboardModule",(function(){return P}));let P=(()=>{class e{}return e.\u0275mod=i.Yb({type:e}),e.\u0275inj=i.Xb({factory:function(t){return new(t||e)},imports:[[a.c,x.a,I.a,M]]}),e})()}}]);