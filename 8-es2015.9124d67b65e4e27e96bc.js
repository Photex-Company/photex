(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{FkkA:function(e,t,c){"use strict";c.r(t);var o=c("ofXK"),a=c("tyNb"),n=c("EGQa"),s=c("3wQM"),i=c("0IaG"),l=c("fXoL"),r=c("bTqV");let g=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){}onAddClick(){this.dialogRef.close(this.catalogueName)}onCloseClick(){this.dialogRef.close()}onKey(e){this.catalogueName=e.target.value}}return e.\u0275fac=function(t){return new(t||e)(l.ac(i.e),l.ac(i.a))},e.\u0275cmp=l.Ub({type:e,selectors:[["app-add-catalogue-dialog"]],decls:16,vars:0,consts:[[1,"modal-header-container"],[1,"modal-title-container"],["mat-dialog-title",""],[1,"modal-content-conatiner"],[1,"row"],[1,"col-md-12"],[1,"ml-1","form-group"],[1,"form-control",3,"keyup"],[1,"modal-buttons-container","center-block","text-center"],["mat-button","",1,"btn","btn-primary","modal-btn",3,"click"],["mat-button","",1,"btn","btn-secondary","modal-btn",3,"click"]],template:function(e,t){1&e&&(l.gc(0,"div",0),l.gc(1,"div",1),l.gc(2,"h1",2),l.Pc(3,"Add catalogue"),l.fc(),l.fc(),l.fc(),l.gc(4,"div",3),l.gc(5,"div",4),l.gc(6,"div",5),l.gc(7,"div",6),l.gc(8,"label"),l.Pc(9,"Catalogue's name"),l.fc(),l.gc(10,"input",7),l.oc("keyup",(function(e){return t.onKey(e)})),l.fc(),l.fc(),l.fc(),l.fc(),l.fc(),l.gc(11,"div",8),l.gc(12,"button",9),l.oc("click",(function(){return t.onAddClick()})),l.Pc(13,"Add"),l.fc(),l.gc(14,"button",10),l.oc("click",(function(){return t.onCloseClick()})),l.Pc(15,"Cancel"),l.fc(),l.fc())},directives:[i.f,r.b],styles:[".modal-header-container[_ngcontent-%COMP%]{border-bottom:grey}.modal-content-conatiner[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.modal-btn[_ngcontent-%COMP%]{width:100px;padding:10px;margin:10px;width:150px}"]}),e})();var d=c("cp0P"),u=c("Lr9k"),h=c("Su13"),f=c("MB3r"),p=c("aEH8"),m=c("FmOb"),b=c("GIG7"),C=c("82XJ");function v(e,t){if(1&e){const e=l.hc();l.gc(0,"img",15),l.oc("click",(function(){l.Hc(e);const t=l.sc().$implicit;return l.sc(),l.Fc(1).selectItem(t)})),l.fc()}}function k(e,t){if(1&e){const e=l.hc();l.gc(0,"img",16),l.oc("click",(function(){l.Hc(e);const t=l.sc().$implicit;return l.sc(),l.Fc(1).unselectItem(t)})),l.fc()}}function O(e,t){if(1&e){const e=l.hc();l.gc(0,"div",8),l.gc(1,"div",9),l.Nc(2,v,1,0,"img",10),l.Nc(3,k,1,0,"ng-template",null,11,l.Oc),l.gc(5,"img",12),l.oc("click",(function(){l.Hc(e);const c=t.$implicit;return l.sc().goToCalogue(c)})),l.fc(),l.gc(6,"label",13),l.Pc(7),l.fc(),l.gc(8,"label",14),l.Pc(9),l.tc(10,"dateFormat"),l.fc(),l.fc(),l.fc()}if(2&e){const e=t.$implicit,c=l.Fc(4);l.sc();const o=l.Fc(1);l.Ob(2),l.yc("ngIf",!o.isSelected(e.Id))("ngIfElse",c),l.Ob(3),l.zc("src",e.CoverImageUrl,l.Ic),l.Ob(2),l.Qc(e.Name),l.Ob(2),l.Qc(l.vc(10,5,e.LastModified,!0))}}const w=[{path:"",component:(()=>{class e{constructor(e,t,c,o,a){this.catalogueService=e,this.router=t,this.dialog=c,this.snackBar=o,this.sortService=a,this.cataloguesInRowNo=4,this.selected=[],this.sort=[]}ngOnInit(){this.initCatalogues(),this.initToolbar()}initCatalogues(){this.catalogueService.getAllCatalogues().subscribe(e=>{this.catalogues=e})}initToolbar(){this.sort.push({name:"Name",field:h.a.NAME,direction:u.a.NONE}),this.sort.push({name:"Modified date",field:h.a.MODIFIED_DATE,direction:u.a.NONE}),this.toolbarConfig={allowDownload:!0,allowFilter:!1}}refreshCatalogues(){this.selected=[],this.initCatalogues()}goToCalogue(e){this.router.navigate([n.a.CATALOGUE,n.a.CATALOGUE,e.Id])}addCalogue(){this.dialog.open(g,{}).afterClosed().subscribe(e=>{e&&this.catalogueService.addCatalogue(e).subscribe(e=>{this.snackBar.open("New catalogue added","Ok"),this.refreshCatalogues()},()=>{this.snackBar.open("Catalogue could not be created","Ok")})})}delete(e){1!==e.length?this.deleteCatalogues(e):this.deleteCatalogue(e[0])}selectAll(){this.selected=Object.assign([],this.catalogues)}unselectAll(){this.selected=[]}deleteCatalogues(e){this.dialog.open(s.a,{data:{title:"Delete catalogues",message:"Are you sure to delete "+e.length+" catalogues ?",ok:"Delete",cancel:"Cancel"}}).afterClosed().subscribe(t=>{if(t){let t=[];e.forEach(e=>{t.push(this.catalogueService.deleteCatalogue(e.Id))}),Object(d.a)(t).subscribe(()=>{this.snackBar.open("Catalogues was deleted","Ok",3e3),this.refreshCatalogues()},e=>{console.log(e),this.snackBar.open("Catalogue could not be deleted","Ok",3e3)})}})}deleteCatalogue(e){this.dialog.open(s.a,{data:{title:"Delete catalogue",message:"Are you sure to delete catalogue "+e.Name+"?",ok:"Delete",cancel:"Cancel"}}).afterClosed().subscribe(t=>{t&&this.catalogueService.deleteCatalogue(e.Id).subscribe(()=>{this.snackBar.open("Catalogue was deleted","Ok",3e3),this.refreshCatalogues()},()=>{this.snackBar.open("Catalogue not be deleted","Ok",3e3)})})}cataloguesSort(e){e.direction==u.a.NONE&&this.refreshCatalogues(),this.sortService.sort(this.catalogues,e)}}return e.\u0275fac=function(t){return new(t||e)(l.ac(f.a),l.ac(a.d),l.ac(i.b),l.ac(p.a),l.ac(m.a))},e.\u0275cmp=l.Ub({type:e,selectors:[["app-dashboard-page"]],decls:10,vars:5,consts:[[3,"toolbarConfig","selected","itemsCount","sortingOptions","addEvent","deleteEvent","selectAllEvent","sortingEvent"],["toolbar",""],[1,"container-fluid"],[1,"row"],[1,"col-md-4"],[1,"inline"],[1,"back-button"],["ngFor","",3,"ngForOf"],[1,"col-md-3","img-container"],[1,"img-wrap"],["src","assets/svg/radio_button_unchecked.svg","class","select","onmouseover","this.src='assets/svg/check_circle_outline.svg'","onmouseout","this.src='assets/svg/radio_button_unchecked.svg'",3,"click",4,"ngIf","ngIfElse"],["selectedImg",""],["onerror","this.src='assets/svg/folder.svg'","alt","Catalogue img",1,"catalog-image",3,"src","click"],[1,"img-label"],[1,"form-group","img-label","date"],["src","assets/svg/radio_button_unchecked.svg","onmouseover","this.src='assets/svg/check_circle_outline.svg'","onmouseout","this.src='assets/svg/radio_button_unchecked.svg'",1,"select",3,"click"],["src","assets/svg/check_circle.svg",1,"select",3,"click"]],template:function(e,t){1&e&&(l.gc(0,"app-toolbar",0,1),l.oc("addEvent",(function(){return t.addCalogue()}))("deleteEvent",(function(e){return t.delete(e)}))("selectAllEvent",(function(){return t.selectAll()}))("sortingEvent",(function(e){return t.cataloguesSort(e)})),l.fc(),l.gc(2,"div",2),l.gc(3,"div",3),l.gc(4,"div",4),l.gc(5,"h1",5),l.gc(6,"a",6),l.Pc(7,"Dashboard"),l.fc(),l.fc(),l.fc(),l.fc(),l.gc(8,"div",3),l.Nc(9,O,11,8,"ng-template",7),l.fc(),l.fc()),2&e&&(l.yc("toolbarConfig",t.toolbarConfig)("selected",t.selected)("itemsCount",t.catalogues?t.catalogues.length:null)("sortingOptions",t.sort),l.Ob(9),l.yc("ngForOf",t.catalogues))},directives:[b.a,o.l,o.m],pipes:[C.a],styles:[".catalog-image[_ngcontent-%COMP%]{margin:30px 15px 15px;height:78px}.img-container[_ngcontent-%COMP%]{display:inline;margin-bottom:20px;padding:20px}label[_ngcontent-%COMP%]{display:block}.right[_ngcontent-%COMP%]{float:right}.img-wrap[_ngcontent-%COMP%]{position:relative;width:172px;height:172px;text-align:center}.img-wrap[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,75.3%,.3);cursor:pointer}.img-wrap[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{position:absolute;top:2px;right:4px;z-index:100}.img-wrap[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:hover{cursor:pointer;color:rgba(51,34,51,.13)}.img-label.date[_ngcontent-%COMP%]{white-space:nowrap;font-size:12px}h1[_ngcontent-%COMP%]{margin:16px}a[_ngcontent-%COMP%]{padding:5px}"]}),e})()}];let _=(()=>{class e{}return e.\u0275mod=l.Yb({type:e}),e.\u0275inj=l.Xb({factory:function(t){return new(t||e)},imports:[[a.f.forChild(w)],a.f]}),e})();var P=c("6k0h"),y=c("KZX/");c.d(t,"DashboardModule",(function(){return M}));let M=(()=>{class e{}return e.\u0275mod=l.Yb({type:e}),e.\u0275inj=l.Xb({factory:function(t){return new(t||e)},imports:[[o.c,y.a,P.a,_]]}),e})()}}]);