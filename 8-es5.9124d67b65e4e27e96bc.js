function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{FkkA:function(e,t,c){"use strict";c.r(t);var n,a=c("ofXK"),o=c("tyNb"),i=c("EGQa"),l=c("3wQM"),s=c("0IaG"),r=c("fXoL"),u=c("bTqV"),g=((n=function(){function e(t,c){_classCallCheck(this,e),this.dialogRef=t,this.data=c}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onAddClick",value:function(){this.dialogRef.close(this.catalogueName)}},{key:"onCloseClick",value:function(){this.dialogRef.close()}},{key:"onKey",value:function(e){this.catalogueName=e.target.value}}]),e}()).\u0275fac=function(e){return new(e||n)(r.ac(s.e),r.ac(s.a))},n.\u0275cmp=r.Ub({type:n,selectors:[["app-add-catalogue-dialog"]],decls:16,vars:0,consts:[[1,"modal-header-container"],[1,"modal-title-container"],["mat-dialog-title",""],[1,"modal-content-conatiner"],[1,"row"],[1,"col-md-12"],[1,"ml-1","form-group"],[1,"form-control",3,"keyup"],[1,"modal-buttons-container","center-block","text-center"],["mat-button","",1,"btn","btn-primary","modal-btn",3,"click"],["mat-button","",1,"btn","btn-secondary","modal-btn",3,"click"]],template:function(e,t){1&e&&(r.gc(0,"div",0),r.gc(1,"div",1),r.gc(2,"h1",2),r.Pc(3,"Add catalogue"),r.fc(),r.fc(),r.fc(),r.gc(4,"div",3),r.gc(5,"div",4),r.gc(6,"div",5),r.gc(7,"div",6),r.gc(8,"label"),r.Pc(9,"Catalogue's name"),r.fc(),r.gc(10,"input",7),r.oc("keyup",(function(e){return t.onKey(e)})),r.fc(),r.fc(),r.fc(),r.fc(),r.fc(),r.gc(11,"div",8),r.gc(12,"button",9),r.oc("click",(function(){return t.onAddClick()})),r.Pc(13,"Add"),r.fc(),r.gc(14,"button",10),r.oc("click",(function(){return t.onCloseClick()})),r.Pc(15,"Cancel"),r.fc(),r.fc())},directives:[s.f,u.b],styles:[".modal-header-container[_ngcontent-%COMP%]{border-bottom:grey}.modal-content-conatiner[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.modal-btn[_ngcontent-%COMP%]{width:100px;padding:10px;margin:10px;width:150px}"]}),n),d=c("cp0P"),f=c("Lr9k"),h=c("Su13"),p=c("MB3r"),v=c("aEH8"),b=c("FmOb"),m=c("GIG7"),C=c("82XJ");function k(e,t){if(1&e){var c=r.hc();r.gc(0,"img",15),r.oc("click",(function(){r.Hc(c);var e=r.sc().$implicit;return r.sc(),r.Fc(1).selectItem(e)})),r.fc()}}function O(e,t){if(1&e){var c=r.hc();r.gc(0,"img",16),r.oc("click",(function(){r.Hc(c);var e=r.sc().$implicit;return r.sc(),r.Fc(1).unselectItem(e)})),r.fc()}}function y(e,t){if(1&e){var c=r.hc();r.gc(0,"div",8),r.gc(1,"div",9),r.Nc(2,k,1,0,"img",10),r.Nc(3,O,1,0,"ng-template",null,11,r.Oc),r.gc(5,"img",12),r.oc("click",(function(){r.Hc(c);var e=t.$implicit;return r.sc().goToCalogue(e)})),r.fc(),r.gc(6,"label",13),r.Pc(7),r.fc(),r.gc(8,"label",14),r.Pc(9),r.tc(10,"dateFormat"),r.fc(),r.fc(),r.fc()}if(2&e){var n=t.$implicit,a=r.Fc(4);r.sc();var o=r.Fc(1);r.Ob(2),r.yc("ngIf",!o.isSelected(n.Id))("ngIfElse",a),r.Ob(3),r.zc("src",n.CoverImageUrl,r.Ic),r.Ob(2),r.Qc(n.Name),r.Ob(2),r.Qc(r.vc(10,5,n.LastModified,!0))}}var _,w,P=[{path:"",component:(_=function(){function e(t,c,n,a,o){_classCallCheck(this,e),this.catalogueService=t,this.router=c,this.dialog=n,this.snackBar=a,this.sortService=o,this.cataloguesInRowNo=4,this.selected=[],this.sort=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.initCatalogues(),this.initToolbar()}},{key:"initCatalogues",value:function(){var e=this;this.catalogueService.getAllCatalogues().subscribe((function(t){e.catalogues=t}))}},{key:"initToolbar",value:function(){this.sort.push({name:"Name",field:h.a.NAME,direction:f.a.NONE}),this.sort.push({name:"Modified date",field:h.a.MODIFIED_DATE,direction:f.a.NONE}),this.toolbarConfig={allowDownload:!0,allowFilter:!1}}},{key:"refreshCatalogues",value:function(){this.selected=[],this.initCatalogues()}},{key:"goToCalogue",value:function(e){this.router.navigate([i.a.CATALOGUE,i.a.CATALOGUE,e.Id])}},{key:"addCalogue",value:function(){var e=this;this.dialog.open(g,{}).afterClosed().subscribe((function(t){t&&e.catalogueService.addCatalogue(t).subscribe((function(t){e.snackBar.open("New catalogue added","Ok"),e.refreshCatalogues()}),(function(){e.snackBar.open("Catalogue could not be created","Ok")}))}))}},{key:"delete",value:function(e){1!==e.length?this.deleteCatalogues(e):this.deleteCatalogue(e[0])}},{key:"selectAll",value:function(){this.selected=Object.assign([],this.catalogues)}},{key:"unselectAll",value:function(){this.selected=[]}},{key:"deleteCatalogues",value:function(e){var t=this;this.dialog.open(l.a,{data:{title:"Delete catalogues",message:"Are you sure to delete "+e.length+" catalogues ?",ok:"Delete",cancel:"Cancel"}}).afterClosed().subscribe((function(c){if(c){var n=[];e.forEach((function(e){n.push(t.catalogueService.deleteCatalogue(e.Id))})),Object(d.a)(n).subscribe((function(){t.snackBar.open("Catalogues was deleted","Ok",3e3),t.refreshCatalogues()}),(function(e){console.log(e),t.snackBar.open("Catalogue could not be deleted","Ok",3e3)}))}}))}},{key:"deleteCatalogue",value:function(e){var t=this;this.dialog.open(l.a,{data:{title:"Delete catalogue",message:"Are you sure to delete catalogue "+e.Name+"?",ok:"Delete",cancel:"Cancel"}}).afterClosed().subscribe((function(c){c&&t.catalogueService.deleteCatalogue(e.Id).subscribe((function(){t.snackBar.open("Catalogue was deleted","Ok",3e3),t.refreshCatalogues()}),(function(){t.snackBar.open("Catalogue not be deleted","Ok",3e3)}))}))}},{key:"cataloguesSort",value:function(e){e.direction==f.a.NONE&&this.refreshCatalogues(),this.sortService.sort(this.catalogues,e)}}]),e}(),_.\u0275fac=function(e){return new(e||_)(r.ac(p.a),r.ac(o.d),r.ac(s.b),r.ac(v.a),r.ac(b.a))},_.\u0275cmp=r.Ub({type:_,selectors:[["app-dashboard-page"]],decls:10,vars:5,consts:[[3,"toolbarConfig","selected","itemsCount","sortingOptions","addEvent","deleteEvent","selectAllEvent","sortingEvent"],["toolbar",""],[1,"container-fluid"],[1,"row"],[1,"col-md-4"],[1,"inline"],[1,"back-button"],["ngFor","",3,"ngForOf"],[1,"col-md-3","img-container"],[1,"img-wrap"],["src","assets/svg/radio_button_unchecked.svg","class","select","onmouseover","this.src='assets/svg/check_circle_outline.svg'","onmouseout","this.src='assets/svg/radio_button_unchecked.svg'",3,"click",4,"ngIf","ngIfElse"],["selectedImg",""],["onerror","this.src='assets/svg/folder.svg'","alt","Catalogue img",1,"catalog-image",3,"src","click"],[1,"img-label"],[1,"form-group","img-label","date"],["src","assets/svg/radio_button_unchecked.svg","onmouseover","this.src='assets/svg/check_circle_outline.svg'","onmouseout","this.src='assets/svg/radio_button_unchecked.svg'",1,"select",3,"click"],["src","assets/svg/check_circle.svg",1,"select",3,"click"]],template:function(e,t){1&e&&(r.gc(0,"app-toolbar",0,1),r.oc("addEvent",(function(){return t.addCalogue()}))("deleteEvent",(function(e){return t.delete(e)}))("selectAllEvent",(function(){return t.selectAll()}))("sortingEvent",(function(e){return t.cataloguesSort(e)})),r.fc(),r.gc(2,"div",2),r.gc(3,"div",3),r.gc(4,"div",4),r.gc(5,"h1",5),r.gc(6,"a",6),r.Pc(7,"Dashboard"),r.fc(),r.fc(),r.fc(),r.fc(),r.gc(8,"div",3),r.Nc(9,y,11,8,"ng-template",7),r.fc(),r.fc()),2&e&&(r.yc("toolbarConfig",t.toolbarConfig)("selected",t.selected)("itemsCount",t.catalogues?t.catalogues.length:null)("sortingOptions",t.sort),r.Ob(9),r.yc("ngForOf",t.catalogues))},directives:[m.a,a.l,a.m],pipes:[C.a],styles:[".catalog-image[_ngcontent-%COMP%]{margin:30px 15px 15px;height:78px}.img-container[_ngcontent-%COMP%]{display:inline;margin-bottom:20px;padding:20px}label[_ngcontent-%COMP%]{display:block}.right[_ngcontent-%COMP%]{float:right}.img-wrap[_ngcontent-%COMP%]{position:relative;width:172px;height:172px;text-align:center}.img-wrap[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,75.3%,.3);cursor:pointer}.img-wrap[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{position:absolute;top:2px;right:4px;z-index:100}.img-wrap[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:hover{cursor:pointer;color:rgba(51,34,51,.13)}.img-label.date[_ngcontent-%COMP%]{white-space:nowrap;font-size:12px}h1[_ngcontent-%COMP%]{margin:16px}a[_ngcontent-%COMP%]{padding:5px}"]}),_)}],M=((w=function e(){_classCallCheck(this,e)}).\u0275mod=r.Yb({type:w}),w.\u0275inj=r.Xb({factory:function(e){return new(e||w)},imports:[[o.f.forChild(P)],o.f]}),w),x=c("6k0h"),E=c("KZX/");c.d(t,"DashboardModule",(function(){return A}));var I,A=((I=function e(){_classCallCheck(this,e)}).\u0275mod=r.Yb({type:I}),I.\u0275inj=r.Xb({factory:function(e){return new(e||I)},imports:[[a.c,E.a,x.a,M]]}),I)}}]);