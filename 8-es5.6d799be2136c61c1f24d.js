function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{FkkA:function(e,t,c){"use strict";c.r(t);var n,a=c("ofXK"),o=c("tyNb"),l=c("EGQa"),i=c("3wQM"),s=c("0IaG"),u=c("fXoL"),r=c("kmnG"),g=c("qFsG"),f=c("bTqV"),d=((n=function(){function e(t,c){_classCallCheck(this,e),this.dialogRef=t,this.data=c}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onAddClick",value:function(){this.dialogRef.close(this.catalogueName)}},{key:"onCloseClick",value:function(){this.dialogRef.close()}},{key:"onKey",value:function(e){this.catalogueName=e.target.value}}]),e}()).\u0275fac=function(e){return new(e||n)(u.ac(s.f),u.ac(s.a))},n.\u0275cmp=u.Ub({type:n,selectors:[["app-add-catalogue-dialog"]],decls:9,vars:0,consts:[["matInput","",3,"keyup"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(e,t){1&e&&(u.gc(0,"mat-form-field"),u.gc(1,"mat-label"),u.Oc(2,"Catalogue's name"),u.fc(),u.gc(3,"input",0),u.oc("keyup",(function(e){return t.onKey(e)})),u.fc(),u.fc(),u.gc(4,"div",1),u.gc(5,"button",2),u.oc("click",(function(){return t.onCloseClick()})),u.Oc(6,"Cancel"),u.fc(),u.gc(7,"button",2),u.oc("click",(function(){return t.onAddClick()})),u.Oc(8,"Add"),u.fc(),u.fc())},directives:[r.a,r.d,g.a,s.c,f.b],styles:[""]}),n),h=c("cp0P"),b=c("MB3r"),p=c("aEH8"),v=c("NFeN"),k=c("82XJ");function C(e,t){if(1&e){var c=u.hc();u.gc(0,"button",1),u.oc("click",(function(){return u.Gc(c),u.sc().selectAll()})),u.Oc(1,"Select all "),u.gc(2,"mat-icon"),u.Oc(3,"check_box"),u.fc(),u.fc()}}function m(e,t){if(1&e){var c=u.hc();u.gc(0,"button",1),u.oc("click",(function(){return u.Gc(c),u.sc().unselectAll()})),u.Oc(1,"Unselect all "),u.gc(2,"mat-icon"),u.Oc(3,"check_box_outline_blank"),u.fc(),u.fc()}}function O(e,t){if(1&e){var c=u.hc();u.gc(0,"button",1),u.oc("click",(function(){u.Gc(c);var e=u.sc();return e.delete(e.selected)})),u.Oc(1,"Delete "),u.gc(2,"mat-icon"),u.Oc(3,"delete"),u.fc(),u.fc()}}function y(e,t){if(1&e){var c=u.hc();u.gc(0,"img",17),u.oc("click",(function(){u.Gc(c);var e=u.sc().$implicit;return u.sc().selectCatalogue(e)})),u.fc()}}function _(e,t){if(1&e){var c=u.hc();u.gc(0,"img",18),u.oc("click",(function(){u.Gc(c);var e=u.sc().$implicit;return u.sc().unselectCatalogue(e)})),u.fc()}}function w(e,t){if(1&e){var c=u.hc();u.gc(0,"div",10),u.gc(1,"div",11),u.Mc(2,y,1,0,"img",12),u.Mc(3,_,1,0,"ng-template",null,13,u.Nc),u.gc(5,"img",14),u.oc("click",(function(){u.Gc(c);var e=t.$implicit;return u.sc().goToCalogue(e)})),u.fc(),u.gc(6,"label",15),u.Oc(7),u.fc(),u.gc(8,"label",16),u.Oc(9),u.tc(10,"dateFormat"),u.fc(),u.fc(),u.fc()}if(2&e){var n=t.$implicit,a=u.Ec(4),o=u.sc();u.Ob(2),u.yc("ngIf",!o.isSelected(n.Id))("ngIfElse",a),u.Ob(3),u.zc("src",n.CoverImageUrl,u.Hc),u.Ob(2),u.Pc(n.Name),u.Ob(2),u.Pc(u.vc(10,5,n.LastModified,!0))}}var M,I,P=[{path:"",component:(M=function(){function e(t,c,n,a){_classCallCheck(this,e),this.catalogueService=t,this.router=c,this.dialog=n,this.snackBar=a,this.cataloguesInRowNo=4,this.selected=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.initCatalogues()}},{key:"initCatalogues",value:function(){var e=this;this.catalogueService.getAllCatalogues().subscribe((function(t){e.catalogues=t}))}},{key:"refreshCatalogues",value:function(){this.selected=[],this.initCatalogues()}},{key:"goToCalogue",value:function(e){this.router.navigate([l.a.CATALOGUE,l.a.CATALOGUE,e.Id])}},{key:"addCalogue",value:function(){var e=this;this.dialog.open(d,{}).afterClosed().subscribe((function(t){t&&e.catalogueService.addCatalogue(t).subscribe((function(t){e.snackBar.open("New catalogue added","Ok"),e.refreshCatalogues()}),(function(){e.snackBar.open("Catalogue could not be created","Ok")}))}))}},{key:"delete",value:function(e){1!==e.length?this.deleteCatalogues(e):this.deleteCatalogue(e[0])}},{key:"isSelected",value:function(e){return!!this.selected.find((function(t){return t.Id===e}))}},{key:"selectCatalogue",value:function(e){this.selected.push(e)}},{key:"unselectCatalogue",value:function(e){var t=this.selected.indexOf(e,0);t>-1&&this.selected.splice(t,1)}},{key:"anySelected",value:function(){return this.selected.length>0}},{key:"allSelected",value:function(){return!!this.catalogues&&this.selected.length===this.catalogues.length}},{key:"selectAll",value:function(){this.selected=Object.assign([],this.catalogues)}},{key:"unselectAll",value:function(){this.selected=[]}},{key:"deleteCatalogues",value:function(e){var t=this;this.dialog.open(i.a,{data:{title:"Delete catalogues",message:"Are you sure to delete "+e.length+" catalogues ?",ok:"Delete",cancel:"Cancel"}}).afterClosed().subscribe((function(c){if(c){var n=[];e.forEach((function(e){n.push(t.catalogueService.deleteCatalogue(e.Id))})),Object(h.a)(n).subscribe((function(){t.snackBar.open("Catalogues was deleted","Ok",3e3),t.refreshCatalogues()}),(function(e){console.log(e),t.snackBar.open("Catalogue could not be deleted","Ok",3e3)}))}}))}},{key:"deleteCatalogue",value:function(e){var t=this;this.dialog.open(i.a,{data:{title:"Delete catalogue",message:"Are you sure to delete catalogue "+e.Name+"?",ok:"Delete",cancel:"Cancel"}}).afterClosed().subscribe((function(c){c&&t.catalogueService.deleteCatalogue(e.Id).subscribe((function(){t.snackBar.open("Catalogue was deleted","Ok",3e3),t.refreshCatalogues()}),(function(){t.snackBar.open("Catalogue not be deleted","Ok",3e3)}))}))}}]),e}(),M.\u0275fac=function(e){return new(e||M)(u.ac(b.a),u.ac(o.d),u.ac(s.b),u.ac(p.a))},M.\u0275cmp=u.Ub({type:M,selectors:[["app-dashboard-page"]],decls:20,vars:4,consts:[[1,"top-tool-bar"],[1,"ml-3","toolbar-add-button",3,"click"],["class","ml-3 toolbar-add-button",3,"click",4,"ngIf"],[1,"ml-3","toolbar-add-button","right"],[1,"container-fluid"],[1,"row"],[1,"col-md-4"],[1,"inline"],[1,"back-button"],["ngFor","",3,"ngForOf"],[1,"col-md-3","img-container"],[1,"img-wrap"],["src","assets/svg/radio_button_unchecked.svg","class","select","onmouseover","this.src='assets/svg/check_circle_outline.svg'","onmouseout","this.src='assets/svg/radio_button_unchecked.svg'",3,"click",4,"ngIf","ngIfElse"],["selectedImg",""],["onerror","this.src='assets/svg/folder.svg'","alt","Catalogue img",1,"catalog-image",3,"src","click"],[1,"img-label"],[1,"form-group","img-label","date"],["src","assets/svg/radio_button_unchecked.svg","onmouseover","this.src='assets/svg/check_circle_outline.svg'","onmouseout","this.src='assets/svg/radio_button_unchecked.svg'",1,"select",3,"click"],["src","assets/svg/check_circle.svg",1,"select",3,"click"]],template:function(e,t){1&e&&(u.gc(0,"div",0),u.gc(1,"button",1),u.oc("click",(function(){return t.addCalogue()})),u.Oc(2,"New "),u.gc(3,"mat-icon"),u.Oc(4,"create_new_folder"),u.fc(),u.fc(),u.Mc(5,C,4,0,"button",2),u.Mc(6,m,4,0,"button",2),u.Mc(7,O,4,0,"button",2),u.gc(8,"button",3),u.Oc(9,"Sort "),u.gc(10,"mat-icon"),u.Oc(11,"sort"),u.fc(),u.fc(),u.fc(),u.gc(12,"div",4),u.gc(13,"div",5),u.gc(14,"div",6),u.gc(15,"h1",7),u.gc(16,"a",8),u.Oc(17,"Dashboard"),u.fc(),u.fc(),u.fc(),u.fc(),u.gc(18,"div",5),u.Mc(19,w,11,8,"ng-template",9),u.fc(),u.fc()),2&e&&(u.Ob(5),u.yc("ngIf",!t.allSelected()),u.Ob(1),u.yc("ngIf",t.anySelected()),u.Ob(1),u.yc("ngIf",t.anySelected()),u.Ob(12),u.yc("ngForOf",t.catalogues))},directives:[v.a,a.m,a.l],pipes:[k.a],styles:[".catalog-image[_ngcontent-%COMP%]{margin:30px 15px 15px;height:78px}.img-container[_ngcontent-%COMP%]{display:inline;margin-bottom:20px;padding:20px}label[_ngcontent-%COMP%]{display:block}.right[_ngcontent-%COMP%]{float:right}.img-wrap[_ngcontent-%COMP%]{position:relative;width:172px;height:172px;text-align:center}.img-wrap[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,75.3%,.3);cursor:pointer}.img-wrap[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{position:absolute;top:2px;right:4px;z-index:100}.img-wrap[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:hover{cursor:pointer;color:rgba(51,34,51,.13)}.img-label.date[_ngcontent-%COMP%]{white-space:nowrap;font-size:12px}h1[_ngcontent-%COMP%]{margin:16px}a[_ngcontent-%COMP%]{padding:5px}"]}),M)}],x=((I=function e(){_classCallCheck(this,e)}).\u0275mod=u.Yb({type:I}),I.\u0275inj=u.Xb({factory:function(e){return new(e||I)},imports:[[o.f.forChild(P)],o.f]}),I),A=c("6k0h"),S=c("KZX/");c.d(t,"DashboardModule",(function(){return N}));var G,N=((G=function e(){_classCallCheck(this,e)}).\u0275mod=u.Yb({type:G}),G.\u0275inj=u.Xb({factory:function(e){return new(e||G)},imports:[[a.c,S.a,A.a,x]]}),G)}}]);